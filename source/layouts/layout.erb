<%#
Copyright 2008-2013 Concur Technologies, Inc.
Licensed under the Apache License, Version 2.0 (the "License"); you may
not use this file except in compliance with the License. You may obtain
a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations
under the License.
%>
<% language_tabs = current_page.data.language_tabs || [] %>
<% page_content = yield %>
<%
  if current_page.data.includes
    current_page.data.includes.each do |include|
      page_content += partial("includes/#{include}")
    end
  end
%>
<%
  t_reg = /t\(([^\)]+)\)/
  current_page.data.title = current_page.data.title.gsub(t_reg){|t| eval(t)}
  page_content = page_content.gsub(t_reg){|t| eval(t)}
%>

<!doctype html>
<html>
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-158616893-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-158616893-1');
    </script>

    <%= favicon_tag "favicon.ico" %>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title><%= current_page.data.title || "API Documentation" %></title>

    <style>
      <%= Rouge::Themes::MonokaiSublime.render(:scope => '.highlight') %>
      header.top-nav {
        position:fixed;
        display:flex;
        flex:1;
        width:100%;
        z-index:100;
        background: #333;
        padding: 0 26px;
        box-sizing: border-box;
        align-items: center;
      }
      div.top-menu{
        display:flex;
        flex: 1;
      }
      a.logo-link{
        line-height: 50px;
      }
      img.logo {
        width: 161px;
        height: 40px;
        vertical-align: middle;
      }
      .con {
          display: flex;
          top: 0;
          height: 55px;
          margin: 0 0 0 62px;
          padding: 0;
          list-style: none;
          text-align: center;
      }

      .con li{
          text-align: center;
          line-height: 55px;
          border:0 solid #000;
          box-sizing: border-box;
      }

      .con a {
        display: inline-block;
        color: #B0B8DB;
        font-size: 15px;
        text-decoration: none;
        line-height: 23px;
        padding: 0 20px;
        vertical-align: middle;
        transform: translate(0, -3px);
      }

      .con a.selected {
        border-bottom: 2px solid transparent;
        border-color: #FFB11A;
        color: #fff;
      }

      a.international {
        display: block;
        height: 27px;
        line-height: 27px;
        text-align: center;
        color: #fff;
        text-decoration: none;
        border: 1px solid #383F66;
        padding: 0 20px;
        color: #F0B90B;
        word-break: keep-all;
      }

      /* Environment dropdown list */
      /* The dropdown container */
      .dropdown {
        float: left;
        overflow: hidden;
      }

      /* Dropdown button */
      .dropdown .dropbtn {
        background-color: inherit;
        display: inline-block;
        color: #B0B8DB;
        font-size: 15px;
        text-decoration: none;
        line-height: 23px;
        padding: 0 20px;
        border: none;
        background: none;
        vertical-align: middle;
        transform: translate(0, -3px);

      }

      /* Add a red background color to navbar links on hover */
      a:hover, .dropdown:hover .dropbtn {
        background-color: inherit;
      }

      /* Dropdown content (hidden by default) */
      .dropdown-content {
        color: #B0B8DB;
        background: #333;
        font-size: 15px;
        text-decoration: none;
        line-height: 53px;
        padding: 0;
        display: none;
        position: relative;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 0;
      }

      /* Links inside the dropdown */
      .dropdown-content a {
        color: #B0B8DB;
        font-size: 15px;
        text-decoration: none;
        line-height: 53px;
        padding: 0 10px;
        display: block;
        text-align: left;
      }

      /* Highlights the currently selected dropdown link */
      .dropdown-content-selected {
        display: block;
        /*color: #696e83;*/
        background-color: #474747;
      }

      /* Add a grey background color to dropdown links on hover */
      .dropdown-content a:hover {
        background-color: #5b5b5b;
      }

      /* Show the dropdown menu on hover */
      .dropdown:hover .dropdown-content {
        display: block;
      }

    <style media="screen">
      <%= Rouge::Themes::MonokaiSublimeSlate.render(:scope => '.highlight') %>
    <style media="print">
      * {
        transition:none!important;
      }
      <%= Rouge::Themes::Base16::Solarized.render(:scope => '.highlight') %>
    </style>
    <%= stylesheet_link_tag :screen, media: :screen %>
    <%= stylesheet_link_tag :print, media: :print %>
    <% if current_page.data.search %>
      <%= javascript_include_tag  "all" %>
    <% else %>
      <%= javascript_include_tag  "all_nosearch" %>
    <% end %>
    <% if current_page.data.code_clipboard %>
    <script>
      $(function() { setupCodeCopy(); });
    </script>
    <% end %>
  </head>



  <!-- Navigation bar START -->
  <header class="top-nav">
    <div class="top-menu">
      <% if current_page.data.logo.present? %>
        <a href="<%= current_page.data.logo.link %>" class="logo-link" target="<%= current_page.data.logo.target %>">
          <%= image_tag "logo.svg", class: 'logo' %>
        </a>
      <% else %>
        <%= image_tag "logo.svg", class: 'logo' %>
      <% end %>

      <ul class="con">

        <!-- Derivatives V3 -->
        <% if page_classes.include?("unified_margin") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:derivativesV3)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/derivativesV3/unified_margin" class="dropdown-content-selected"><%=t(:dv_unifiedMargin)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/derivativesV3/contract" class="dropdown-content-selected"><%=t(:dv_contract)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/derivativesV3/unified_margin" class="dropdown-content-selected"><%=t(:dv_unifiedMargin)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/derivativesV3/contract" class="dropdown-content-selected"><%=t(:dv_contract)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% elsif page_classes.include?("contract") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:derivativesV3)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/derivativesV3/unified_margin" class="dropdown-content-selected"><%=t(:dv_unifiedMargin)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/derivativesV3/contract" class="dropdown-content-selected"><%=t(:dv_contract)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/derivativesV3/unified_margin" class="dropdown-content-selected"><%=t(:dv_unifiedMargin)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/derivativesV3/contract" class="dropdown-content-selected"><%=t(:dv_contract)%></a>
              </div>
            </div>
          </li>
          <% end %>
        <% else %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:derivativesV3)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/derivativesV3/unified_margin" ><%=t(:dv_unifiedMargin)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/derivativesV3/contract" ><%=t(:dv_contract)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/derivativesV3/unified_margin" class="dropdown-content-selected"><%=t(:dv_unifiedMargin)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/derivativesV3/contract" class="dropdown-content-selected"><%=t(:dv_contract)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% end %>

        <!-- Futures V2(USDT perp, Inverse Perp, Inverse Futures) -->
        <% if page_classes.include?("inverse") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:futuresV2)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse" ><%=t(:inverse_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/linear" ><%=t(:linear_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse_futures" ><%=t(:inverse_futures)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse" ><%=t(:inverse_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/linear" ><%=t(:linear_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse_futures" ><%=t(:inverse_futures)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% elsif page_classes.include?("linear") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:futuresV2)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse" ><%=t(:inverse_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/linear" ><%=t(:linear_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse_futures" ><%=t(:inverse_futures)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse" ><%=t(:inverse_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/linear" ><%=t(:linear_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse_futures" ><%=t(:inverse_futures)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% elsif page_classes.include?("inverse_futures") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:futuresV2)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse" ><%=t(:inverse_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/linear" ><%=t(:linear_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse_futures" ><%=t(:inverse_futures)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse" ><%=t(:inverse_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/linear" ><%=t(:linear_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse_futures" ><%=t(:inverse_futures)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% else %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:futuresV2)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse" ><%=t(:inverse_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/linear" ><%=t(:linear_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse_futures" ><%=t(:inverse_futures)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse" ><%=t(:inverse_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/linear" ><%=t(:linear_perpetual)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse_futures" ><%=t(:inverse_futures)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% end %>

        <!-- Spot V3(Spot v1, Spot v3) -->
        <% if page_classes.include?("v1") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:spot)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v3" ><%=t(:spotV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v1" ><%=t(:spotV1)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v3" ><%=t(:spotV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v1" ><%=t(:spotV1)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% elsif page_classes.include?("v3") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:spot)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v3" ><%=t(:spotV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v1" ><%=t(:spotV1)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v3" ><%=t(:spotV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v1" ><%=t(:spotV1)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% else %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:spot)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v3" ><%=t(:spotV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v1" ><%=t(:spotV1)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v3" ><%=t(:spotV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v1" ><%=t(:spotV1)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% end %>

        <!-- Account asset V3(asset v1, asset v3) -->
        <% if page_classes.include?("v1") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:account_asset)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v3" ><%=t(:assetV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v1" ><%=t(:assetV1)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v3" ><%=t(:assetV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v1" ><%=t(:assetV1)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% elsif page_classes.include?("v3") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:account_asset)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v3" ><%=t(:assetV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v1" ><%=t(:assetV1)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v3" ><%=t(:assetV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v1" ><%=t(:assetV1)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% else %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:account_asset)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v3" ><%=t(:assetV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v1" ><%=t(:assetV1)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v3" ><%=t(:assetV3)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v1" ><%=t(:assetV1)%></a>
                <% end %>
              </div>
            </div>
          </li>
        <% end %>

        <!-- Copy Trading -->
        <% if page_classes.end_with?("copy_trading_index") %>
        	<% if page_classes.include?("testnet") %>
          	<li><a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/copy_trading" class="selected"><%=t(:copy_trading)%></a></li>
        	<% else %>
          	<li><a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/copy_trading" class="selected"><%=t(:copy_trading)%></a></li>
        	<% end %>
        <% else %>
        	<% if page_classes.include?("testnet") %>
          	<li><a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/copy_trading"><%=t(:copy_trading)%></a></li>
        	<% else %>
          	<li><a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/copy_trading"><%=t(:copy_trading)%></a></li>
        	<% end %>
        <% end %>

        <!-- USDC dropdown (Options, Perpetual) -->
        <% if page_classes.include?("option") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:usdc)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
                <% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/usdc/option" class="dropdown-content-selected"><%=t(:usdc_option)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/usdc/perpetual"><%=t(:usdc_perpetual)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/usdc/option" class="dropdown-content-selected"><%=t(:usdc_option)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/usdc/perpetual"><%=t(:usdc_perpetual)%></a>
              	<% end %>
              </div>
            </div>
          </li>
        <% elsif page_classes.include?("perpetual") %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:usdc)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
              	<% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/usdc/option" ><%=t(:usdc_option)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/usdc/perpetual" class="dropdown-content-selected"><%=t(:usdc_perpetual)%></a>
              	<% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/usdc/option"><%=t(:usdc_option)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/usdc/perpetual" class="dropdown-content-selected"><%=t(:usdc_perpetual)%></a>
            		<% end %>
              </div>
            </div>
          </li>
        <% else %>
          <li>
            <div class="dropdown">
              <button class="dropbtn"><%=t(:usdc)%>
                <i class="fa fa-caret-down"></i>
              </button>
              <div class="dropdown-content">
            		<% if page_classes.include?("testnet") %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/usdc/option" ><%=t(:usdc_option)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/testnet/usdc/perpetual"><%=t(:usdc_perpetual)%></a>
                <% else %>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/usdc/option"><%=t(:usdc_option)%></a>
                  <a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s %>/usdc/perpetual"><%=t(:usdc_perpetual)%></a>
            		<% end %>
              </div>
            </div>
          </li>
        <% end %>

        <!-- Tax -->
        <% if page_classes.end_with?("tax_index") %>
        	<% if page_classes.include?("testnet") %>
          	<!-- <li><a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/tax" class="selected"><%=t(:tax)%></a></li> -->
        	<% else %>
          	<li><a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/tax" class="selected"><%=t(:tax)%></a></li>
        	<% end %>
        <% else %>
        	<% if page_classes.include?("testnet") %>
          	<!-- <li><a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/tax"><%=t(:tax)%></a></li> -->
        	<% else %>
          	<li><a href="<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/tax"><%=t(:tax)%></a></li>
        	<% end %>
        <% end %>

        <!-- Environment dropdown (Testnet, Mainnet) -->
        <!-- It's very long because each button needs its own logic to link to testnet or mainnet depending on if the website is on testnet or mainnet. -->
        <li>
          <div class="dropdown">
            <button class="dropbtn">Environment
              <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
              <% if page_classes.end_with?("unified_margin_index") %>
                <% if page_classes.include?("testnet") %>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/derivativesV3/unified_margin>Mainnet</a>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/derivativesV3/unified_margin>Testnet</a></span>
                <% else %>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/derivativesV3/unified_margin>Mainnet</a></span>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/derivativesV3/unified_margin>Testnet</a>
                <% end %>
              <% end %>
              <% if page_classes.end_with?("contract_index") %>
                <% if page_classes.include?("testnet") %>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/derivativesV3/contract>Mainnet</a>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/derivativesV3/contract>Testnet</a></span>
                <% else %>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/derivativesV3/contract>Mainnet</a></span>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/derivativesV3/contract>Testnet</a>
                <% end %>
              <% end %>
              <% if page_classes.end_with?("inverse_index") %>
                <% if page_classes.include?("testnet") %>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse>Mainnet</a>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse>Testnet</a></span>
                <% else %>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse>Mainnet</a></span>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse>Testnet</a>
                <% end %>
              <% end %>
              <% if page_classes.end_with?("linear_index") %>
                <% if page_classes.include?("testnet") %>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/linear>Mainnet</a>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/linear>Testnet</a></span>
                <% else %>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/linear>Mainnet</a></span>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/linear>Testnet</a>
                <% end %>
              <% end %>
              <% if page_classes.end_with?("inverse_futures_index") %>
                <% if page_classes.include?("testnet") %>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse_futures>Mainnet</a>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse_futures>Testnet</a></span>
                <% else %>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/futuresV2/inverse_futures>Mainnet</a></span>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/futuresV2/inverse_futures>Testnet</a>
                <% end %>
              <% end %>

              <!-- it's for spot testnet switch to spot mainnet -->
              <% if page_classes.end_with?("v1_index") %>
                <% if page_classes.include?("spot") %>
                  <% if page_classes.include?("testnet") %>
                    <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v1>Mainnet</a>
                    <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v1>Testnet</a></span>
                  <% else %>
                    <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v1>Mainnet</a></span>
                    <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v1>Testnet</a>
                  <% end %>
                <% end %>
              <% end %>
              <% if page_classes.end_with?("v3_index") %>
                <% if page_classes.include?("spot") %>
                  <% if page_classes.include?("testnet") %>
                    <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v3>Mainnet</a>
                    <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v3>Testnet</a></span>
                  <% else %>
                    <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/spot/v3>Mainnet</a></span>
                    <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/spot/v3>Testnet</a>
                  <% end %>
                <% end %>
              <% end %>

              <!-- it's for asset mainnet switch to asset testnet -->
              <% if page_classes.end_with?("v1_index") %>
                <% if page_classes.include?("account_asset") %>
                  <% if page_classes.include?("testnet") %>
                    <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v1>Mainnet</a>
                    <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v1>Testnet</a></span>
                  <% else %>
                    <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v1>Mainnet</a></span>
                    <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v1>Testnet</a>
                  <% end %>
                <% end %>
              <% end %>
              <% if page_classes.end_with?("v3_index") %>
                <% if page_classes.include?("account_asset") %>
                  <% if page_classes.include?("testnet") %>
                    <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v3>Mainnet</a>
                    <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v3>Testnet</a></span>
                  <% else %>
                    <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/account_asset/v3>Mainnet</a></span>
                    <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/account_asset/v3>Testnet</a>
                  <% end %>
                <% end %>
              <% end %>

              <% if page_classes.end_with?("copy_trading_index") %>
                <% if page_classes.include?("testnet") %>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/copy_trading>Mainnet</a>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/copy_trading>Testnet</a></span>
                <% else %>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/copy_trading>Mainnet</a></span>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/copy_trading>Testnet</a>
                <% end %>
              <% end %>
              <% if page_classes.include?("option") %>
                <% if page_classes.include?("testnet") %>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/usdc/option>Mainnet</a>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/usdc/option>Testnet</a></span>
                <% else %>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/usdc/option>Mainnet</a></span>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/usdc/option>Testnet</a>
                <% end %>
              <% end %>
              <% if page_classes.include?("perpetual") %>
                <% if page_classes.include?("testnet") %>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/usdc/perpetual>Mainnet</a>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/usdc/perpetual>Testnet</a></span>
                <% else %>
                  <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/usdc/perpetual>Mainnet</a></span>
                  <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/usdc/option>Testnet</a>
                <% end %>
              <% end %>
              <% if page_classes.end_with?("tax_index") %>
                <% if page_classes.include?("testnet") %>
                  <!-- <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/tax>Mainnet</a> -->
                  <!-- <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/tax>Testnet</a></span> -->
                <% else %>
                  <!-- <span class="dropdown-content-selected"><a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/tax>Mainnet</a></span> -->
                  <!-- <a href=<%= (I18n.locale.to_s == 'en') ? "/doc-offline" : "/doc-offline/"+I18n.locale.to_s%>/testnet/tax>Testnet</a> -->
                <% end %>
              <% end %>
            </div>
          </div>
        </li>
      </ul>

    </div>
    <a class="international" id="international" href="javascript:void(0);"><%=t(:international)%></a>
  </header>
  <!-- Navigation bar END -->



  <body class="<%= page_classes %>" data-languages="<%=h language_tabs.map{ |lang| lang.is_a?(Hash) ? lang.keys.first : lang }.to_json %>">
    <a href="#" id="nav-button">
      <span>
        NAV
        <%= image_tag('navbar.png') %>
      </span>
    </a>
    <div class="toc-wrapper">
      <% if language_tabs.any? %>
        <div class="lang-selector">
          <% language_tabs.each do |lang| %>
            <% if lang.is_a? Hash %>
              <a href="#" data-language-name="<%= lang.keys.first %>"><%= lang.values.first %></a>
            <% else %>
              <a href="#" data-language-name="<%= lang %>"><%= lang %></a>
            <% end %>
          <% end %>
        </div>
      <% end %>
      <% if current_page.data.search %>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="<%=t(:search) %>">
        </div>
        <ul class="search-results"></ul>
      <% end %>
      <ul id="toc" class="toc-list-h1">
        <% toc_data(page_content).each do |h1| %>
          <li>
            <a href="#<%= h1[:id] %>" class="toc-h1 toc-link" data-title="<%= h1[:title] %>"><%= h1[:content] %></a>
            <% if h1[:children].length > 0 %>
              <ul class="toc-list-h2">
                <% h1[:children].each do |h2| %>
                  <li>
                    <a href="#<%= h2[:id] %>" class="toc-h2 toc-link" data-title="<%= h2[:title] %>"><%= h2[:content] %></a>
                    <% if h2[:children].length > 0 %>
                      <ul class="toc-list-h3">
                        <% h2[:children].each do |h3| %>
                          <li>
                            <a href="#<%= h3[:id] %>" class="toc-h3 toc-link" data-title="<%= h3[:content] %>"><%= h3[:content] %></a>
                            <% if h3[:children].length > 0 %>
                              <ul class="toc-list-h4">
                                <% h3[:children].each do |h4| %>
                                  <li>
                                    <a href="#<%= h4[:id] %>" class="toc-h4 toc-link" data-title="<%= h4[:content] %>"><%= h4[:content] %></a>
                                  </li>
                                <% end %>
                              </ul>
                            <% end %>
                          </li>
                        <% end %>
                      </ul>
                    <% end %>
                  </li>
                <% end %>
              </ul>
            <% end %>
          </li>
        <% end %>
      </ul>
      <% if current_page.data.toc_footers %>
        <ul class="toc-footer">
          <% current_page.data.toc_footers.each do |footer| %>
            <li><%= footer.gsub(t_reg){|t| eval(t)} %></li>
          <% end %>
        </ul>
      <% end %>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <%= page_content %>
      </div>
      <div class="dark-box">
        <% if language_tabs.any? %>
          <div class="lang-selector">
            <% language_tabs.each do |lang| %>
              <% if lang.is_a? Hash %>
                <a href="#" data-language-name="<%= lang.keys.first %>"><%= lang.values.first %></a>
              <% else %>
                <a href="#" data-language-name="<%= lang %>"><%= lang %></a>
              <% end %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </body>

<script>
    $(".con a").click(function(){
      $(".con a").removeClass("selected");
      $(this).addClass("selected")
    });
    $("#international").click(function(){
      $this = $(this);
      var currentUrl = window.location.href;
      if ($this.text() == 'English') {
        window.location=currentUrl.replace(/\/zh-my/,"");
      } else {
        if (currentUrl.indexOf("futuresV2") > -1) {
	        window.location=currentUrl.replace(/\/((?:testnet\/)?futuresV2)/,"/zh-my/$1");
        } else if (currentUrl.indexOf("inverse") > -1) {
          window.location=currentUrl.replace(/\/((?:testnet\/)?inverse)/,"/zh-my/$1");
        } else if(currentUrl.indexOf("spot") > -1) {
          window.location=currentUrl.replace(/\/((?:testnet\/)?spot)/,"/zh-my/$1");
        } else if(currentUrl.indexOf("account_asset") > -1) {
          window.location=currentUrl.replace(/\/((?:testnet\/)?account_asset)/,"/zh-my/$1");
        } else if(currentUrl.indexOf("linear") > -1) {
          window.location=currentUrl.replace(/\/((?:testnet\/)?linear)/,"/zh-my/$1");
        } else if(currentUrl.indexOf("copy_trading") > -1) {
          window.location=currentUrl.replace(/\/((?:testnet\/)?copy_trading)/,"/zh-my/$1");
        } else if(currentUrl.indexOf("usdc") > -1) {
          window.location=currentUrl.replace(/\/((?:testnet\/)?usdc)/,"/zh-my/$1");
	      } else if(currentUrl.indexOf("derivativesV3") > -1) {
	        window.location=currentUrl.replace(/\/((?:testnet\/)?derivativesV3)/,"/zh-my/$1");
	      } else if(currentUrl.indexOf("tax") > -1) {
	        window.location=currentUrl.replace(/\/((?:testnet\/)?tax)/,"/zh-my/$1");
	      }
      }
    });
</script>

</html>
